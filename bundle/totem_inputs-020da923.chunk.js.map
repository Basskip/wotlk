{"version":3,"file":"totem_inputs-020da923.chunk.js","sources":["../../../ui/core/components/totem_inputs.ts"],"sourcesContent":["import { BooleanPicker } from '../components/boolean_picker.js';\nimport { EnumPicker } from '../components/enum_picker.js';\nimport { IconEnumPicker, IconEnumPickerConfig } from '../components/icon_enum_picker.js';\nimport { IconPicker } from '../components/icon_picker.js';\nimport { IconPickerConfig } from '../components/icon_picker.js';\nimport {\n\tAirTotem,\n\tEarthTotem,\n\tFireTotem,\n\tWaterTotem,\n\tShamanTotems,\n} from '../proto/shaman.js';\nimport { Spec } from '../proto/common.js';\nimport { ActionId } from '../proto_utils/action_id.js';\nimport { Player } from '../player.js';\nimport { Sim } from '../sim.js';\nimport { IndividualSimUI } from '../individual_sim_ui.js';\nimport { EventID, TypedEvent } from '../typed_event.js';\nimport * as InputHelpers from '../components/input_helpers.js';\nimport { SpecRotation } from '../proto_utils/utils.js';\nimport { ContentBlock } from './content_block.js';\nimport { Input } from './input.js';\n\nexport type DpsShaman = Spec.SpecEnhancementShaman | Spec.SpecElementalShaman;\n\nexport function TotemsSection(parentElem: HTMLElement, simUI: IndividualSimUI<DpsShaman>): ContentBlock {\n\tlet contentBlock = new ContentBlock(parentElem, 'totems-settings', {\n\t\theader: {title: 'Totems'}\n\t});\n\n\tlet totemDropdownGroup = Input.newGroupContainer();\n\ttotemDropdownGroup.classList.add('totem-dropdowns-container', 'icon-group');\n\n\tlet fireElementalContainer = document.createElement('div');\n\tfireElementalContainer.classList.add('fire-elemental-inputs-container');\n\n\tcontentBlock.bodyElement.appendChild(totemDropdownGroup);\n\tcontentBlock.bodyElement.appendChild(fireElementalContainer);\n\t\n\tconst earthTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\n\t\textraCssClasses: [\n\t\t\t'earth-totem-picker',\n\t\t],\n\t\tnumColumns: 1,\n\t\tvalues: [\n\t\t\t{ color: '#ffdfba', value: EarthTotem.NoEarthTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(58643), value: EarthTotem.StrengthOfEarthTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(8143), value: EarthTotem.TremorTotem },\n\t\t],\n\t\tequals: (a: EarthTotem, b: EarthTotem) => a == b,\n\t\tzeroValue: EarthTotem.NoEarthTotem,\n\t\tchangedEvent: (player: Player<DpsShaman>) => player.rotationChangeEmitter,\n\t\tgetValue: (player: Player<DpsShaman>) => player.getRotation().totems?.earth || EarthTotem.NoEarthTotem,\n\t\tsetValue: (eventID: EventID, player: Player<DpsShaman>, newValue: number) => {\n\t\t\tconst newRotation = player.getRotation();\n\t\t\tif (!newRotation.totems)\n\t\t\t\tnewRotation.totems = ShamanTotems.create();\n\t\t\tnewRotation.totems!.earth = newValue;\n\t\t\tplayer.setRotation(eventID, newRotation);\n\t\t},\n\t});\n\n\tconst waterTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\n\t\textraCssClasses: [\n\t\t\t'water-totem-picker',\n\t\t],\n\t\tnumColumns: 1,\n\t\tvalues: [\n\t\t\t{ color: '#bae1ff', value: WaterTotem.NoWaterTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(58774), value: WaterTotem.ManaSpringTotem },\n\t\t],\n\t\tequals: (a: WaterTotem, b: WaterTotem) => a == b,\n\t\tzeroValue: WaterTotem.NoWaterTotem,\n\t\tchangedEvent: (player: Player<DpsShaman>) => player.rotationChangeEmitter,\n\t\tgetValue: (player: Player<DpsShaman>) => player.getRotation().totems?.water || WaterTotem.NoWaterTotem,\n\t\tsetValue: (eventID: EventID, player: Player<DpsShaman>, newValue: number) => {\n\t\t\tconst newRotation = player.getRotation();\n\t\t\tif (!newRotation.totems)\n\t\t\t\tnewRotation.totems = ShamanTotems.create();\n\t\t\tnewRotation.totems!.water = newValue;\n\t\t\tplayer.setRotation(eventID, newRotation);\n\t\t},\n\t});\n\n\tconst fireTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\n\t\textraCssClasses: [\n\t\t\t'fire-totem-picker',\n\t\t],\n\t\tnumColumns: 1,\n\t\tvalues: [\n\t\t\t{ color: '#ffb3ba', value: FireTotem.NoFireTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(58734), value: FireTotem.MagmaTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(58704), value: FireTotem.SearingTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(57722), value: FireTotem.TotemOfWrath, showWhen: (player: Player<DpsShaman>) => player.getTalents().totemOfWrath },\n\t\t\t{ actionId: ActionId.fromSpellId(58656), value: FireTotem.FlametongueTotem },\n\t\t],\n\t\tequals: (a: FireTotem, b: FireTotem) => a == b,\n\t\tzeroValue: FireTotem.NoFireTotem,\n\t\tchangedEvent: (player: Player<DpsShaman>) => player.rotationChangeEmitter,\n\t\tgetValue: (player: Player<DpsShaman>) => player.getRotation().totems?.fire || FireTotem.NoFireTotem,\n\t\tsetValue: (eventID: EventID, player: Player<DpsShaman>, newValue: number) => {\n\t\t\tconst newRotation = player.getRotation();\n\t\t\tif (!newRotation.totems)\n\t\t\t\tnewRotation.totems = ShamanTotems.create();\n\t\t\tnewRotation.totems!.fire = newValue;\n\t\t\tplayer.setRotation(eventID, newRotation);\n\t\t},\n\t});\n\n\tconst airTotemPicker = new IconEnumPicker(totemDropdownGroup, simUI.player, {\n\t\textraCssClasses: [\n\t\t\t'air-totem-picker',\n\t\t],\n\t\tnumColumns: 1,\n\t\tvalues: [\n\t\t\t{ color: '#baffc9', value: AirTotem.NoAirTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(8512), value: AirTotem.WindfuryTotem },\n\t\t\t{ actionId: ActionId.fromSpellId(3738), value: AirTotem.WrathOfAirTotem },\n\t\t],\n\t\tequals: (a: AirTotem, b: AirTotem) => a == b,\n\t\tzeroValue: AirTotem.NoAirTotem,\n\t\tchangedEvent: (player: Player<DpsShaman>) => player.rotationChangeEmitter,\n\t\tgetValue: (player: Player<DpsShaman>) => player.getRotation().totems?.air || AirTotem.NoAirTotem,\n\t\tsetValue: (eventID: EventID, player: Player<DpsShaman>, newValue: number) => {\n\t\t\tconst newRotation = player.getRotation();\n\t\t\tif (!newRotation.totems)\n\t\t\t\tnewRotation.totems = ShamanTotems.create();\n\t\t\tnewRotation.totems!.air = newValue;\n\t\t\tplayer.setRotation(eventID, newRotation);\n\t\t},\n\t});\n\n\tconst fireElementalBooleanIconInput = InputHelpers.makeBooleanIconInput<DpsShaman, ShamanTotems, Player<DpsShaman>>({\n\t\tgetModObject: (player: Player<DpsShaman>) => player,\n\t\tgetValue: (player: Player<DpsShaman>) => player.getRotation().totems || ShamanTotems.create(),\n\t\tsetValue: (eventID: EventID, player: Player<DpsShaman>, newVal: ShamanTotems) => {\n\t\t\tconst newRotation = player.getRotation();\n\t\t\tnewRotation.totems = newVal;\n\t\t\tplayer.setRotation(eventID, newRotation);\n\t\t},\n\t\tchangeEmitter: (player: Player<Spec.SpecEnhancementShaman>) => player.rotationChangeEmitter,\n\t}, ActionId.fromSpellId(2894), \"useFireElemental\");\n\n\tnew IconPicker(fireElementalContainer, simUI.player, fireElementalBooleanIconInput);\n\n\treturn contentBlock;\n}\n"],"names":["TotemsSection","parentElem","simUI","contentBlock","ContentBlock","header","title","totemDropdownGroup","Input","newGroupContainer","classList","add","fireElementalContainer","document","createElement","bodyElement","appendChild","IconEnumPicker","player","extraCssClasses","numColumns","values","color","value","EarthTotem","NoEarthTotem","actionId","ActionId","fromSpellId","StrengthOfEarthTotem","TremorTotem","equals","a","b","zeroValue","changedEvent","rotationChangeEmitter","getValue","getRotation","totems","earth","setValue","eventID","newValue","newRotation","ShamanTotems","create","setRotation","WaterTotem","NoWaterTotem","ManaSpringTotem","water","FireTotem","NoFireTotem","MagmaTotem","SearingTotem","TotemOfWrath","showWhen","getTalents","totemOfWrath","FlametongueTotem","fire","AirTotem","NoAirTotem","WindfuryTotem","WrathOfAirTotem","air","fireElementalBooleanIconInput","InputHelpers.makeBooleanIconInput","getModObject","newVal","changeEmitter","IconPicker"],"mappings":"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"}